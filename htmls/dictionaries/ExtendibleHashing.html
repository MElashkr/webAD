<!DOCTYPE html>
<html lang="en">
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<!-- Chrome, Firefox OS and Opera -->
<meta name="theme-color" content="#0063A6">
<!-- Windows Phone -->
<meta name="msapplication-navbutton-color" content="#0063A6">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-status-bar-style" content="#0063A6">

<!--[if !IE]><!-->
<title>WebAD 2.0 &#9829; </title>
<!--<![endif]-->

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<!-- Chrome, Firefox OS and Opera -->
	<meta name="theme-color" content="#0063A6">
	<!-- Windows Phone -->
	<meta name="msapplication-navbutton-color" content="#0063A6">
	<!-- iOS Safari -->
	<meta name="apple-mobile-web-app-status-bar-style" content="#0063A6">

	<!-- BEGIN WEBAD STYLES -->
	<link href="../../styles/imgRD.css" rel="stylesheet" type="text/css" />
	<link href="../../styles/styleRD.css" rel="stylesheet" type="text/css" />
	<!-- END WEBAD STYLES -->
	<link href="../../layout/assets/global/css/components-md.css" id="style_components" rel="stylesheet" type="text/css" />
	<link href="../../layout/assets/global/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
	<link href="../../layout/assets/global/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
	<link href="../../layout/assets/global/plugins/bootstrap-switch/css/bootstrap-switch.min.css" rel="stylesheet" type="text/css"
		media="screen" />

	<!-- BEGIN THEME LAYOUT STYLES -->
	<link href="../../layout/css/layout.min.css" rel="stylesheet" type="text/css" />
	<link href="../../layout/css/themes/blue-steel.min.css" rel="stylesheet" type="text/css" />
	<!-- END THEME LAYOUT STYLES -->
	<link href="../../layout/css/adaptResponsive.css" rel="stylesheet" type="text/css" />

	<script src="../../layout/Jquery/js/Framework/jquery-1.11.0.min.js"></script>
	<script src="../../layout/assets/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
	<script src="../../layout/Jquery/js/UI/jquery-ui-1.11.4/jquery-ui.min.js" type="text/javascript"></script>

	<script src="../../layout/assets/global/plugins/bootstrap-hover-dropdown/bootstrap-hover-dropdown.min.js" type="text/javascript"></script>

	<script src="../../layout/assets/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js" type="text/javascript"></script>

	<!-- BEGIN THEME GLOBAL SCRIPTS -->
	<script src="../../layout/assets/global/scripts/app.min.js" type="text/javascript"></script>
	<!-- END THEME GLOBAL SCRIPTS -->
	<!-- BEGIN THEME LAYOUT SCRIPTS -->
	<script src="../../layout/assets/scripts/layout.min.js" type="text/javascript"></script>
	<script src="../../layout/assets/global/scripts/quick-sidebar.min.js" type="text/javascript"></script>
	<!-- END THEME LAYOUT SCRIPTS -->

	<script src="../../libs/externalLibs/kinetic-v5.1.0.min.js"></script>
	<script src="../../libs/views/dictionaries/extendibleHashing.js"></script>
	<script src="../../libs/models/dictionaries/extendibleHashing.js"></script>
	<!-- END JAVASCRIPTS -->

	<!-- Mobile View-->
	<meta name="viewport" content="user-scalable=yes, width=device-width, initial-scale=1.0" />

	<meta name="distribution" content="global">
	<meta name="rating" content="general">
	<meta name="author" content="WebAD">
	<meta name="publisher" content="WebAD">
	<meta name="copyright" content="Â© WebAD Team 2018">

	<meta name="resource-type" content="document">
	<meta name="application-name" content="WebAD">
	<meta name="msapplication-tooltip" content="WebAD Website">
	<meta name="msapplication-window" content="width=1024;height=768">
</head>

<script>
	var eh_instance = undefined;
	

	function init(){
		
		eh_instance=new ExtendibleHashing();
		var c1 = document.getElementById("container1");
		var c2 = document.getElementById("containerElements");
		var pBtn = $("#p");
		eh_instance.view.initStage(c1,c2,pBtn);	
				
	}
		
	function example(){
		eh_instance.example();
	}

 
	function clearTimes(){
		//[30]
		var pids = window.setTimeout(function() {}, 0);

		while (pids--) {
    		window.clearTimeout(pids); 
		}
		
	}
	
	function create(){		
		if(!eh_instance.working){
			clearTimes();
			eh_instance.init();
		}		
	}
	
	function add(){
		if(!eh_instance.working){
			clearTimes();
			eh_instance.prepareNextConsistentStateAndInvokeTask("add");
		}
	}
	
	function search(){
		if(!eh_instance.working){
			clearTimes();
			eh_instance.prepareNextConsistentStateAndInvokeTask("search");
		}
	}
	
	function rem(){
		if(!eh_instance.working){
			clearTimes();
			eh_instance.prepareNextConsistentStateAndInvokeTask("remove");
		}
	}
	
	function pre(){
		if(!eh_instance.working){
			clearTimes();
			eh_instance.prev();
		}
	}
	
	function next(){
		var sp = $("#speed");
		if(sp.val() === 0){
			if(eh_instance.actualOption === 'add'){
				clearTimes();
				play();
			}else if(eh_instance.actualOption === 'remove' || eh_instance.actualOption === 'search' ){
					if(!eh_instance.working){
					clearTimes();
					eh_instance.next();
				}
			}
			
		}else{
				if(!eh_instance.working){
				clearTimes();
				eh_instance.next();
			}
		}
	}
	
	 function changeTextToPlayModus(isPlayModus){
         var btnElement = document.getElementById("p");        
         var iconElement = document.getElementById("iconPlayPause");
        if(isPlayModus){
            btnElement.innerHTML = " <i class='fa fa-play-circle-o fa-lg'></i> Play"
        }else {
              btnElement.innerHTML = " <i class='fa fa-pause fa-lg'></i> Stop"
        }
    }

	
	function play(){
        var spTemp = $("#speed");
		// Pause when active and speed not equal to zero!
		if(eh_instance.working && eh_instance.speed !== 0){
			eh_instance.speed = 0;
			eh_instance.orginalSpeed = spTemp.val();
			//Update spinner too
			var sp = $("#speed");
			//sp.val(0);
			
			changeTextToPlayModus(false)
			return;
		}

		// Play when inactive 
		if( !eh_instance.working && eh_instance.speed != 0){

			eh_instance.working=true; // will be automatically unset	
			clearTimes();	

			var sp = $("#speed");
			var speed = 3;
			if(parseInt(sp.val()) > 0) 
				speed = parseInt(sp.val()); // If user set the speed in config before pressing play
			else
				sp.val(speed); // Update spinner with an alternative speed.
	
			eh_instance.continueTask(speed);
			changeTextToPlayModus(true);
			
			return;
		}else if(spTemp.val() === 0){
			clearTimes();
			eh_instance.continueTask(0);
		}else {
			alert("Click next to end acutal operation!")
		}

	}

	function first(){
		if(!eh_instance.working){
				clearTimes();
				eh_instance.firstState();
		}
	}
	
	function last(){
		if(!eh_instance.working){
				clearTimes();
				eh_instance.lastState();
		}
	}
	
	function zoomIn(){
     	eh_instance.view.zoomIn();
	}
	
	function zoomOut(){
     	eh_instance.view.zoomOut();
	}

	function speed(){

		if(eh_instance!==undefined){
			
			var sp = $("#speed");
			var tmp = parseInt(sp.val());
			
			if(  tmp >= 0 || 6 <= tmp){ 
				eh_instance.speed=tmp;
				eh_instance.orginalSpeed = tmp;
				
				if(tmp===0){
					document.getElementById('alertbox').style.visibility='visible';
					$('#alertbox').addClass('alert-box2-manuel').removeClass(' col-md-5 alert-box-manuel');
					$('#alertbox').text('Manuel Mode');
				}else if(tmp > 6){
					$('#alertbox').addClass('col-md-5 alert-box-manuel').removeClass('col-md-3 alert-box2-manuel');
					$('#alertbox').text('Allowed values from 0 to 6.');
					document.getElementById('alertbox').style.visibility='visible';
				}else{
					document.getElementById('alertbox').style.visibility='hidden';
				}
				
				return;
			}
		}
	}

</script>

<body class="page-container-bg-solid page-md" style="background: #eff3f8;" onload="init();example();return false;">
	<div class="page-container">
		<div class="page-content-wrapper">
			<div class="page-header navbar-white" style="background: #eff3f8; height: fit-content;">
				<!-- BEGIN HEADER MENU -->
				<div class="page-header-menu navbar-white">
					<div class="container navbar-white">
						<div class="hor-menu  hor-menu-light">
							<div id="navPlaceholder">
								<script src="../../layout/assets/global/scripts/nav-menu.js" type="text/javascript"></script>
							</div>
						</div>
						<!-- END MEGA MENU -->
					</div>
				</div>
				<!-- END HEADER MENU -->
				<!-- <%--Top Header--%> -->
				<div id="logo_minDevice" class="page-header-top">
					<div class="container">
						<div class="page-logo" style="/*width: 400px!important; */height: auto;">
							<div class="row">
								<div class="col-md-11">
								</div>
								<a href="../home/index.html">
									<div class="col-md-1 logo logo-margin-top">
									</div>
								</a>
							</div>
						</div>
						<a href="javascript:;" class="menu-toggler"></a>
						<div class="top-menu">

						</div>
					</div>
					<div class="container pull-center">
					</div>
				</div>
				<!-- end top header -->
			</div>
			<!-- END HEADER MENU -->
			<!-- <%--content--%> -->
			<div class="page-content" style="padding-top: 0;">
				<div class="container">
				</div>
				<div class="container">

					<div class="page-content-inner inner-conent-padding-top" style="background:white">
						<!-- Conent WEB AD -->
						<div class="tab-pane active" id="form_1">
							<div class="portlet box blue">
								<div class="portlet-title">
									<div class="caption">
										<i class="fa fa-gift"></i>Extendible Hashing</div>
									<div class="tools">
										<a href="javascript:;" class="collapse" data-original-title="" title=""> </a>
										<a href="#" data-toggle="modal" data-target="#modalConfig" class="fa fa-wrench" title="Configuration" style="color:white"></a>
										<a href="#" data-toggle="modal" data-target="#modalInfo" class="fa fa-info-circle" title="Information" style="color:white"></a>
									</div>
								</div>
								<div class="portlet-body form" style="display: block;">
									<!-- BEGIN FORM-->
									<div class="form-body">
										<!--/row-->
										<div class="row" id="options_desktop">
											<div class="col-md-1">
												<button type="button" class="btn blue disabled">Options</button>
											</div>
											<div class="col-md-10">
												<button type="button" class="btn blue btn-outline" id="create" onclick="create();return false;">Create</button>
												<button type="button" class="btn blue btn-outline" id="add" onclick="add();return false;">Add Value</button>
												<button type="button" class="btn blue btn-outline" id="remove" onclick="rem();return false;">Remove Value</button>
												<button type="button" class="btn blue btn-outline" id="search" onclick="search();return false;">Search for Value</button>
												<!--<div id="containerWrapperE" style="margin:5px; display:none;">
													<div id="containerElements" style="background:white; color:black; text-align:left;max-height: 150px;overflow: scroll;">
													</div>
												</div>-->
											</div>
										</div>
										<!--/row-->
										<div class="row" id="options_minDevice">
											<div class="col-md-12">
												<div class="dropdown">
													<button class="btn blue dropdown-toggle" type="button" data-toggle="dropdown">Options
                                                        <span class="caret"></span></button>
													<ul class="dropdown-menu">
														<li><button type="button" class="btn blue btn-outline btn-block" id="create" onclick="create();return false;">Create</button></li>
														<li><button type="button" class="btn blue btn-outline btn-block" id="add" onclick="add();return false;">Add Value</button></li>
														<li><button type="button" class="btn blue btn-outline btn-block" id="remove" onclick="rem();return false;">Remove Value</button></li>
														<li><button type="button" class="btn blue btn-outline btn-block" id="search" onclick="search();return false;">Search for Value</button></li>
													</ul>
												</div>
											</div>
										</div>

										<div class="row">
											<div id="container1" class="col-md-10 inner-content-container1" style="overflow: scroll;">
											</div>
											<div class="col-md-2 padding-top-10" style="overflow:auto;">
												<a href="javascript:;" class="text-blue" data-toggle="collapse" data-target="#containerWrapperE">Actual Values</a>
												<div id="containerWrapperE" style="margin:10px; " class="collapse in">
													<div id="containerElements" style="background:white; color:black; text-align:left;max-height: 150px;overflow: scroll;">
													</div>
												</div>
											</div>
										</div>
									</div>
									<div class="form-actions right">
										<div class="row">
											<div class="col-md-1">
											</div>
											<div class="col-md-6 text-center">
												<button type="button" class="btn blue" id="first" onclick="first();return false;">
                                            <i class="fa fa-fast-backward fa-lg"></i><span class="btn-recorder">First</span></button>
												<button type="button" class="btn blue" id="prev" onclick="pre();return false;">
                                            <i class="fa fa-backward fa-lg"></i><span class="btn-recorder">Previous</span></button>
												<button type="button" class="btn blue" id="p" onclick="play();return false;">
                                            <i id="iconPlayPause" class="fa fa-play-circle-o fa-lg"></i><span class="btn-recorder">Play</span></button>
												<button type="button" class="btn blue" id="next" onclick="next();return false;">
                                            <i class="fa fa-forward fa-lg"></i><span class="btn-recorder">Next</span></button>
												<button type="button" class="btn blue" id="last" onclick="last();return false;">
                                            <i class="fa fa-fast-forward fa-lg"></i><span class="btn-recorder">Last</span></button>
											</div>
											<div class="col-md-1">
											</div>
											<div class="col-md-4 text-center">
												<button type="button" class="btn green" onclick="zoomOut();return false;">
                                            <i class="fa fa-search-minus fa-lg"></i><span class="btn-zoom">Zoom Out</span></button>
												<button type="button" class="btn green" onclick="zoomIn();return false;">
                                            <i class="fa fa-search-plus fa-lg"></i><span class="btn-zoom">Zoom In</span></button>
											</div>
										</div>
									</div>
								</div>
								<!-- END FORM-->
							</div>
						</div>
					</div>
					<div class="footer">
						<div class="container">
							webAD is a web-based system designed for simple and intuitive learning of Algorithms and Datastrures. For further questions
							please contact:
							<a href="mailto:begy.volodimir@gmail.com">begy.volodimir@gmail.com</a>
						</div>
						<div id="return-to-top" class="scroll-to-top" title="return to top">
							<i id="top-arrow"></i>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- BEGIN MODAL -->
	<div id="myModal" class="modal fade" role="dialog" aria-hidden="true">
		<div class="modal-dialog" role="document">
			<!-- Modal content-->
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h4 class="modal-title">Info</h4>
				</div>
				<div class="modal-body">
					<h3>Legend</h3>
					<ul style="list-style-type:none">
						<li>b: bucket size</li>
						<li>d: global depth</li>
						<li>k: local depth</li>
					</ul>
					Note: Setting the speed to zero or pressing pause causes the animation to halt. If you invoke an operation in a paused state
					the animation will <b>not</b> continue, unless you resume with the play button. You can resume from <i>any</i>					state.

					<h3>Basics</h3>
					<p>Extendible Hashing uses a hash function that computes the binary representation of an arbitrary key and an array, serving
						as a directory, where each entry maps to exactly one bucket. The computed hash maps to exactly one entry in the array,
						whereby the bucket is determined.
					</p>
					<p>
						The hash function also uses a bitmask to blend out unnecessary bits. This however depends entirely on the size of the array,
						which is defined as 2<sup>d</sup>, with <i>d</i> being the <i>global depth</i>. So the hash consists only of
						d bits. This implementation uses the least-significant bits.
					</p>
					<p>
						If, however, a bucket reaches the limit of its capacity <i>b</i>, then the bucket is split and its values are rehashed.
						Since every entry in the array can only reference one bucket at any given time, it also becomes necessary to expand
						the array from time to time, which is accomplished by incrementing d by 1.
					</p>
					<p>
						In order to split and expand in a controlled manner another variable <i>k</i>, the <i>local depth</i>, is saved in
						every bucket, that helps to keep track of the entries referencing the bucket. 2<sup>d-k</sup> gives the number of entries
						mapping to this block.
					</p>
					<p>
						In case of a bucket overflow, these are core steps to resolve the issue: </br>
						</br>
						<b>If  k < d : split the bucket</b> </br>
						</br>
						<b>If  k = d :	double the array size</b> </br>
						</br>
					</p>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>
	<!-- END MOAL -->
	<!-- BEGIN MODAL -->
	<div id="modalConfig" class="modal fade" role="dialog" aria-hidden="true">
		<div class="modal-dialog" role="document">
			<!-- Modal content-->
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h4 class="modal-title">Config</h4>
				</div>
				<div class="modal-body">
					<div class="row">
						<div class="col-md-12">
							<div class="form-group">
								<label class="control-label col-md-4">Animation speed:</label>
								<div class="col-md-2">
									<input type="number" class="input-control" name="speed" style="width:40px" id="speed" min="0" max="6" step="1" value="5"
										onchange="speed();return false;">
								</div>
								<label id="alertbox" class="control-label col-md-5 alert-box-manuel" style="margin-top:5px;"></label>
							</div>
						</div>
					</div>
					<div class="row">
					<div class="col-md-12">
						<br/> For manual mode set animation speed to 0. In manual mode click "Next" to coninue animation for one step. Click "Next"
						until animation ends or set animation speed back to automatic mode (speed from 1 to 6) and let it end automatically.
					</div>
				</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>
	<!-- END MOAL -->
</body>

</html>